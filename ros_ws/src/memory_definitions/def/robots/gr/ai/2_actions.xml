<actions>
	<action ref="jack">
		<params/>
		<conditions/>
		<actions exec="all" order="linear">
			<actionlist repeat="3">
				<orderref ref="ask_for_jack"/>
			</actionlist>
			<orderref ref="wait_for_jack"/>
		</actions>
	</action>

	<action ref="game_start" name="Game start routine actions">
		<params></params>
		<conditions></conditions>
		<actions>
			<orderref ref="set_robot_pos">
				<position_waypoint>way_spawn_gr</position_waypoint>
			</orderref>

			<actionref ref="jack"/>

			<orderref ref="timer_start">
				<duration>97</duration>
			</orderref>

			<orderref ref="set_game_status_ingame"/>
		</actions>
	</action>

	<action ref="activate_button" name="Go and activate Home Button" reward="25">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<orderref ref="navigator_goto_waypoint" name="approach button">
				<waypoint_name>way_button_approach</waypoint_name>
				<direction>1</direction>
			</orderref>

			<orderref ref="asserv_goto_waypoint" name="accost button">
				<position_waypoint>way_button_accost</position_waypoint>
				<direction>0</direction>
				<mode>0</mode> <!-- GOTO so more precise -->
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="go back to approach">
				<waypoint_name>way_button_approach</waypoint_name>
				<direction>1</direction>
			</orderref>
		</actions>
	</action>

	<action ref="push_grape_1" name="Simply push grape 1 cubes to the zone" reward="25">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<orderref ref="navigator_goto_waypoint" name="go behind the cubes">
				<waypoint_name>way_grape_1_approach</waypoint_name>
				<direction>0</direction>
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="go behind the cubes">
				<waypoint_name>way_grape_1_accost</waypoint_name>
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="push them to the zone">
				<waypoint_name>way_grape_1_pushed</waypoint_name>
				<direction>0</direction>
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="push them to the zone">
				<waypoint_name>way_grape_1_released</waypoint_name>
			</orderref>
		</actions>
	</action>

	<action ref="push_grape_2" name="Simply push grape 2 cubes to the zone" reward="25">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<orderref ref="navigator_goto_waypoint" name="go behind the cubes">
				<waypoint_name>way_grape_2_approach</waypoint_name>
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="go behind the cubes">
				<waypoint_name>way_grape_2_accost</waypoint_name>
				<direction>0</direction>
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="push them to the zone">
				<waypoint_name>way_grape_2_pushed</waypoint_name>
				<direction>0</direction>
			</orderref>

			<orderref ref="navigator_goto_waypoint" name="release">
				<waypoint_name>way_grape_2_released</waypoint_name>
			</orderref>
		</actions>
	</action>



	<action ref="open_arm" name="Open arm">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<orderref ref="arm_goto">
				<frame_id>arm_origin</frame_id>
				<x>0.1965</x>
				<y>0</y>
			</orderref>
		</actions>
	</action>

	<action ref="close_arm" name="Close arm">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<orderref ref="actuator_ax12_set_pos">
				<motor_id>1</motor_id>
				<position>64</position>
			</orderref>

			<orderref ref="actuator_ax12_set_pos">
				<motor_id>3</motor_id>
				<position>314</position>
			</orderref>
		</actions>
	</action>

	<action ref="push_bee" name="Push bee">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<team name="green">
				<orderref ref="actuator_ax12_set_pos">
					<motor_id>1</motor_id>
					<position>612</position>
				</orderref>

				<orderref ref="actuator_ax12_set_pos">
					<motor_id>3</motor_id>
					<position>250</position>
					<speed>150</speed>
				</orderref>
			</team>

			<team name="orange">
				<orderref ref="actuator_ax12_set_pos">
					<motor_id>1</motor_id>
					<position>412</position>
				</orderref>

				<orderref ref="actuator_ax12_set_pos">
					<motor_id>3</motor_id>
					<position>660</position>
					<speed>150</speed>
				</orderref>
			</team>
		</actions>
	</action>

	<action ref="activate_bee" name="Activate bee" reward="50">
		<params></params>
		<conditions></conditions>
		<actions exec="all" order="linear">
			<team name="green">
				<orderref ref="navigator_goto_waypoint" name="approach bee">
					<waypoint_name>way_bee_approach_green</waypoint_name>
				</orderref>
			</team>
			<team name="orange">
				<orderref ref="navigator_goto_waypoint" name="approach bee">
					<waypoint_name>way_bee_approach_orange</waypoint_name>
				</orderref>
			</team>

			<actionref ref="open_arm" name="open arm" />

			<!--<orderref ref="actuator_set" name="lift arm">-->
				<!--<name>arm_elevator</name>-->
				<!--<preset>GO_UP</preset>-->
			<!--</orderref>-->

			<team name="green">
				<orderref ref="navigator_goto_waypoint" name="accost bee">
					<waypoint_name>way_bee_accost_green</waypoint_name>
				</orderref>
			</team>

			<team name="orange">
				<orderref ref="navigator_goto_waypoint" name="accost bee">
					<waypoint_name>way_bee_accost_orange</waypoint_name>
				</orderref>
			</team>

			<actionref ref="push_bee" duration="1.5"/>

			<actionref ref="close_arm" name="open arm" />

			<orderref ref="navigator_goto_waypoint" name="approach bee">
				<waypoint_name>way_bee_approach</waypoint_name>
				<direction>0</direction>
			</orderref>
		</actions>
	</action>
</actions>
